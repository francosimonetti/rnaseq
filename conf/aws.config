process {
    executor = 'awsbatch'
    queue = 'nf-job-queue'
    scratch = '/mnt/efs/fs1/tmp'
}

aws {
    region = 'us-east-1'
    batch {
      cliPath = '/home/ec2-user/miniconda/bin/aws'
      volumes = '/mnt/efs/fs1'
      maxParallelTransfers = 20
    }
    client.maxConnections = 20
}

params {
  // Input data
  //readPathsFile = "/mnt/efs/fs1/rnaseq/data/read_paths_GEUVADIS_GBR20.tsv"
  //readPathsFile = "s3://fsimonetti-nfdata/input/s3_paths_GEU_20.txt"
  readPathsFile = "s3://fsimonetti-nfdata/input/GEUVADIS_1kgIDS_full_urls_AWS_S3.txt"
  // Genome references
  unstranded = true
  //outdir = "/mnt/efs/fs1/results/test_GEUVADIS_20samples"
  outdir = "s3://fsimonetti-nfdata/outdir_full"
  //workdir = "s3://fsimonetti-nfdata/workdir"

  run_ge_quant = true
  run_salmon = true
  run_txrevise = false
  run_leafcutter = false
  run_exon_quant = true
  mbv_vcf = "s3://fsimonetti-nfdata/1kGP/1kGP_high_coverage_Illumina.chr22.filtered.SNV_INDEL_SV_phased_panel.no_chr.vcf.gz"
  mbv_vcf_index = "s3://fsimonetti-nfdata/1kGP/1kGP_high_coverage_Illumina.chr22.filtered.SNV_INDEL_SV_phased_panel.no_chr.vcf.gz.tbi"
  run_mbv = true

  saveReference = false
  saveTrimmed = false
  saveAlignedIntermediates = true
  saveIndividualQuants = true
  saveInfoLogs = true

}

trace {
  overwrite = true
}

dag {
 overwrite = true
}

timeline {
 overwrite = true
}

report {
 overwrite = true
}
